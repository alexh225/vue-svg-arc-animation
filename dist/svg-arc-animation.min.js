/*!
* vue-svg-arc-animation v0.0.1
* Copyright 2018 Iskandar Jamil <iskandar.jamil@vltkl.com>
*/

(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";if(Object.defineProperty(exports,"__esModule",{value:!0}),"undefined"==typeof d3)throw new Error("D3.js version 4 (v4) is required. Please include this https://d3js.org/d3.v4.min.js in your script tag. More info on D3, please visit https://d3js.org/");var SvgArcAnimationComponent={name:"svg-arc-animation",render:function(t){var e=this;return t("svg",{attrs:{width:e.boxSize,height:e.boxSize,viewBox:"0 0 "+e.boxSize+" "+e.boxSize},on:{click:e.restart},style:{cursor:"pointer",maxWidth:"100%"}},[t("foreignObject",{attrs:{width:e.boxSize,height:e.boxSize}},[t("div",{class:"svg_aa--txt-wrapper",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}},[t("div",{class:"svg_aa--txt-content",style:{color:e.color,fontSize:e.boxSize/12*.2+"em",fontWeight:"bold"}},[e.fgTxt,e.textOffset])])]),t("g",{attrs:{transform:"translate("+e.boxSize/2+","+e.boxSize/2+")"}},[t("g",{class:"svg_aa--progress_meter"},[t("path",{class:"svg_aa--bg",attrs:{d:e.bg,"fill-opacity":"0",stroke:e.color,"stroke-width":e.bgBorder,"stroke-opacity":"1","stroke-linecap":"round","stroke-linejoin":"round"}},[]),t("path",{class:"svg_aa--fg",ref:e.uniqueId+"-fg",attrs:{transform:e.directionAnim,d:e.fg,"fill-opacity":"0",stroke:e.color,"stroke-width":e.fgBorder,"stroke-opacity":"0","stroke-linecap":"round","stroke-linejoin":"round"}},[])])])])},props:{value:{type:Number,default:500},total:{type:Number,default:1e3},textOffset:{type:String,default:""},size:{type:Number,default:75},padding:{type:Number,default:10},direction:{type:String,default:"ltr"},duration:{type:Number,default:1200},delay:{type:Number,default:0},color:{type:String,default:"red"},bgBorder:{type:Number,default:2},fgBorder:{type:Number,default:8},start:{type:Boolean,default:!0}},data:function(){return{shortName:"svg-aa",twoPi:2*Math.PI,easing:d3.easeBounce,fgTxt:0}},computed:{uniqueId:function(){return this.shortName+"-"+this._uid},percentage:function(){return this.value<1?0:this.value/this.total*100},boxSize:function(){return 2*(this.size+this.padding)},bg:function(){return this.setArc({endAngle:this.twoPi})},fg:function(){return this.setArc({endAngle:this.twoPi})},directionAnim:function(){return"ltr"===this.direction?"rotate(180, 0, 0) scale(1,-1)":"rotate(0, 0, 0) scale(1, 1)"}},methods:{init:function(){var t=this;this.start&&Vue.nextTick(function(){setTimeout(function(){t.animateDraw()},t.delay)}),this.$parent.$on("animate",function(){Vue.nextTick(function(){setTimeout(function(){t.animateDraw()},t.delay)})}),this.$on("animate",function(){Vue.nextTick(function(){setTimeout(function(){t.animateDraw()},t.delay)})})},animateDraw:function(){var t=this;t.value<1||d3.select(t.$refs[t.uniqueId+"-fg"]).attr("stroke-opacity",1).transition().ease(t.easing).duration(t.duration).attrTween("d",function(){return t.arcTween({endAngle:0},t.percentage/100)})},setArc:function(t){return d3.arc().startAngle(0).innerRadius(this.size).outerRadius(this.size).cornerRadius(50)(t)},arcTween:function(t,e){var n,i,r,o=this;return n=0+e*(2*Math.PI),d3.interpolate(t.startAngle,0),i=d3.interpolate(t.endAngle,n),function(e){return t.endAngle=i(e),r=t.endAngle/n*o.value,o.fgTxt=r<1?0:r.toFixed(0),o.setArc(t)}},restart:function(t){var e=this;e.fgTxt=0,d3.select(e.$refs[e.uniqueId+"-fg"]).attr("stroke-opacity",1).transition().duration(10).attrTween("d",function(){return e.arcTween({endAngle:0},.01)}),Vue.nextTick(function(){setTimeout(function(){e.animateDraw()},10)})}},mounted:function(){this.init()}},SvgArcAnimation={install:function(t,e){t.component(SvgArcAnimationComponent.name,SvgArcAnimationComponent)}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(SvgArcAnimation),exports.default=SvgArcAnimation;
},{}]},{},[1]);
